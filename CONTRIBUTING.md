# Contributing to the Ryuutama FVTT system

The system repository accepts contributions in both the form of issues and pull requests.

### Contributing Changes
Code contributions are accepted from outside contributors in the form of a Pull Request. For pull requests to implement new features or changes to existing features, please first consider whether such a feature belongs in the system and supports the rules of the TTRPG. In addition, an Issue should accompany the pull request; if no such issue exists, it is encouraged to open one for discussion first. Generally, pull requests are considered if they target an issue that is relevant to the current milestone. Please keep pull requests contained to a singular issue and avoid large sprawling code changes that affect large amounts of the codebase. Such pull requests should ideally be split into smaller changes for easier review. The system maintainer has final say on reviews and merging of pull requests.

See below for guidance on setting up a local repository for contributions.

### Other Contributions
Contributions outside of pull requests are encouraged in the form of issues with feature requests and bug reports. When making an feature request, please consider whether it belongs in the Ryuutama system and enhances or enforces the rules of the TTRPG. In addition, a feature request should have a valid use case to be considered appropriately. When filing bug reports, please provide a step-by-step process to reproduce the issue, after having disabled irrelevant modules, and be sure to include your Foundry VTT core version and build, your current Ryuutama version, and OS and browser (if relevant).

When filing an issue, please make sure your request is not a duplicate of an existing issue.

## Developer Tooling

To start, clone this repository and either place it in or symlink it to your `data/systems/ryuutama` user data directory.
To provide type and i18n support, this repository uses a postinstall script that symlinks your local Foundry installation. For this to work, copy `example-foundry-config.yaml` and rename it to `foundry-config.yaml`, then replace the value of the `installPath` field.
Once this is done you can run `npm install` to install all relevant dependencies, followed by `npm run db:pack` to build the included system compendiums.

For vscode, you will need to create a `.vscode/settings.json` file with the following:

```json
{
  "eslint.enable": true,
  "eslint.validate": ["javascript", "handlebars", "html"]
}
```

### VSCode support for i18n

If you are using VSCode, the i18n Ally (ID: `lokalise.i18n-ally`) extension will preview the content of i18n strings by pulling from both `lang/en.json` as well as the symlinked core translation files at `foundry/lang/en.json`.

In addition to the above setup, copy the following into your `.vscode/settings.json` to support i18n-ally:
```json
"i18n-ally.localesPaths": [
  "lang",
  "foundry/lang"
],
"i18n-ally.keystyle": "nested",
```

### Managing Compendiums

This repository makes use of the Foundry CLI package to manage included system compendiums. Two commands are relevant for contributors looking to contribute with changes to the packs.
- `npm run db:pack` compiles the JSON files into system compendiums.
- `npm run db:unpack` decompiles the system compendiums into JSON files.

# AI Policy

This repository does not contain, nor does it make use of, any content or code of any kind generated by artificial intelligence. This policy is strictly enforced on both internal and external contributors.
